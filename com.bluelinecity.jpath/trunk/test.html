<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title> New Document </title>
<meta name="Generator" content="EditPlus">
<meta name="Author" content="">
<meta name="Keywords" content="">
<meta name="Description" content="">
<script src="jpath.js" /></script>
</head>

<body>

<script>

var myobj = [
{
    "dataOptions": {
        "id": "id1",
        "count": "10"
    },
    "name": "Leon",
    "children": [
        {
            "dataOptions": {
                "id": "id2",
                "count": "10"
            },
            "name": "Leon",
            "children": [],
            "isExpanded": false
        },
        {
            "dataOptions": {
                "id": "id2",
                "count": "10"
            },
            "name": "Leon",
            "children": [],
            "isExpanded": false
        }
    ],
    "isExpanded": false
},
{
    "dataOptions": {
        "id": "id3",
        "count": "10"
    },
    "name": "Leon",
    "children": [],
    "isExpanded": false
},
{
    "dataOptions": {
        "id": "id4",
        "count": "10"
    },
    "name": "Leon",
    "children": [],
    "isExpanded": false
}

];
/*
function pr (v){document.write(v + '<br>'); }

pr(myobj.rss['@version']);

var jp = new JPath( myobj );

pr(jp.$('rss').$('@version').json);
pr(jp.$('rss/@version').json);
pr(jp.query('rss/@version'));

pr(jp.$('rss').$('item').$(5).$('title').json);
pr(jp.query('rss/item[5]/title'));
pr(jp.query('/rss/@max'));

pr(jp.$('rss').$('item').$(function(j){ with(j){return($('active').json);} }).$('title').json);
pr(jp.$('rss/item').f("!$('active').json").$('title').json);

pr(jp.query('rss/*[active]/title'));

//pr(jp.query('rss/item[enclosure/@filesize > /rss/@max - 500]/title'));

pr(jp.$('rss').$('item').f("$('enclosure').$('@filesize').json > parent().$('rss/@max').json-500").$('title').json);

pr(jp.$('rss/item').f('position() == 1').$('title').json);
pr(jp.query('rss/item[ position() == 1 ]/title'));

pr(jp.$('rss/item').f('last()').$('title').json);

//token types // midpoint node selection, endpoint node selection, predicate condition

var a = new JPath(window);


/*
/rss/item[active = true]
/rss/item[ count(posts) > 3 ]

jp.$('rss').$('item').$(function(j){ with(j){ count($('posts)) > 3 } }).json

/rss/item[last(./posts)]

anything that matches /node/node]

*/

//pr(js.query('/rss/item[active]/title'));

// query('rss/item/[acti]/title

var jp = new JPath(myobj);

test = jp.$$('*').$(function(n){ return(n.$('dataOptions/id').json == 'id2'); }).json;
test = jp.query('//*[dataOptions/id = "id2"]');

alert(test[0].name);


</script>

</body>
</html>
